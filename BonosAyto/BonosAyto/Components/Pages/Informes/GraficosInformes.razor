@page "/informe1"

@using Blazorise
@using Blazorise.Charts
@using BonosAytoService.Services
@inject EstablecimientoService EstablecimientoService


<h3 class="w-100 text-center">GRÁFICOS INFORMES</h3>

<div class="d-flex mb-3">
    <div class="selectContainer">
        <input list="establecimientos" class="form-control" placeholder="Establecimiento" @onchange="@ValidarYSeleccionarEstablecimiento" />
        <datalist id="establecimientos">
            <option value="Todos" />
            @foreach (var e in nombresEstablecimientos)
            {
                <option value="@e" />
            }
        </datalist>
    </div>

    <Dropdown class="mx-2">
        <DropdownToggle Color="Color.Secondary">@filtros.FiltroSeleccionado</DropdownToggle>
        <DropdownMenu>
            <DropdownItem @onclick="@(() => CambiarFiltro("Total"))">Total</DropdownItem>
            <DropdownItem @onclick="@(() => CambiarFiltro("Trimestre activo"))">Trimestre activo</DropdownItem>
        </DropdownMenu>
    </Dropdown>
</div>

<div class="container">
    <div class="row">
        @if (!String.IsNullOrEmpty(@mensajeAlert))
        {
            <div class="alert alert-danger">@mensajeAlert</div>
        }
        else
        {
        <CascadingValue Value="filtros">
            <GraficoTotal />
            <GraficoDiario />
            <GraficoMensual />
        </CascadingValue>
        }
    </div>
</div>



